version: 0.1
endpoints:
  - name: inventory-management-backend
    schemaVersion: 1.0
    metadata:
      name: inventory-management-backend
      description: Flask backend for inventory management system
    buildSpec:
      source:
        context: .
        docker:
          file: Dockerfile
      env:
        - name: FLASK_ENV
          value: production
        - name: DB_HOST
          value: ${DB_HOST}  # From Choreo database
        - name: DB_PORT
          value: ${DB_PORT}  # From Choreo database
        - name: DB_USER
          value: ${DB_USER}  # From Choreo database
        - name: DB_NAME
          value: ${DB_NAME}  # From Choreo database
        - name: DB_PWD
          value: ${DB_PWD}   # From Choreo database
        - name: SECRET_KEY
          value: ${SECRET_KEY}
        - name: JWT_SECRET_KEY
          value: ${JWT_SECRET_KEY}
    deploy:
      resources:
        cpu: 0.5
        memory: 512Mi
      restartPolicy: Always
    expose:
      api:
        type: REST
        port: 8080
        context: /api
        networkVisibility: Public
        basePath: /api
      